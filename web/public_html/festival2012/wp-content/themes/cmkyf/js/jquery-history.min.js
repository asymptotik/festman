jQuery.extend({historyCurrentHash:undefined,historyCallback:undefined,historyIframeSrc:undefined,historyNeedIframe:jQuery.browser.msie&&(jQuery.browser.version<8||document.documentMode<8),historyInit:function(a,b){jQuery.historyCallback=a;if(b)jQuery.historyIframeSrc=b;var c=location.hash.replace(/\?.*$/,"");jQuery.historyCurrentHash=c;if(jQuery.historyNeedIframe){if(jQuery.historyCurrentHash=="")jQuery.historyCurrentHash="#";jQuery("body").prepend('<iframe id="jQuery_history" style="display: none;" src="javascript:false;"></iframe>');
var d=jQuery("#jQuery_history")[0].contentWindow.document;d.open();d.close();d.location.hash=c}else if(jQuery.browser.safari){jQuery.historyBackStack=[];jQuery.historyBackStack.length=history.length;jQuery.historyForwardStack=[];jQuery.lastHistoryLength=history.length;jQuery.isFirst=true}c&&jQuery.historyCallback(c.replace(/^#/,""));setInterval(jQuery.historyCheck,100)},historyAddHistory:function(a){jQuery.historyBackStack.push(a);jQuery.historyForwardStack.length=0;this.isFirst=true},historyCheck:function(){if(jQuery.historyNeedIframe){var a=
jQuery("#jQuery_history")[0];a=(a.contentDocument||a.contentWindow.document).location.hash.replace(/\?.*$/,"");if(a!=jQuery.historyCurrentHash){location.hash=a;jQuery.historyCurrentHash=a;jQuery.historyCallback(a.replace(/^#/,""))}}else if(jQuery.browser.safari){jQuery.lastHistoryLength==history.length&&jQuery.historyBackStack.length>jQuery.lastHistoryLength&&jQuery.historyBackStack.shift();if(!jQuery.dontCheck){a=history.length-jQuery.historyBackStack.length;jQuery.lastHistoryLength=history.length;
if(a){jQuery.isFirst=false;if(a<0)for(var b=0;b<Math.abs(a);b++)jQuery.historyForwardStack.unshift(jQuery.historyBackStack.pop());else for(b=0;b<a;b++)jQuery.historyBackStack.push(jQuery.historyForwardStack.shift());a=jQuery.historyBackStack[jQuery.historyBackStack.length-1];if(a!=undefined){jQuery.historyCurrentHash=location.hash.replace(/\?.*$/,"");jQuery.historyCallback(a)}}else if(jQuery.historyBackStack[jQuery.historyBackStack.length-1]==undefined&&!jQuery.isFirst){location.hash?jQuery.historyCallback(location.hash.replace(/^#/,
"")):jQuery.historyCallback("");jQuery.isFirst=true}}}else{a=location.hash.replace(/\?.*$/,"");if(a!=jQuery.historyCurrentHash){jQuery.historyCurrentHash=a;jQuery.historyCallback(a.replace(/^#/,""))}}},historyLoad:function(a){var b;a=decodeURIComponent(a.replace(/\?.*$/,""));if(jQuery.browser.safari)b=a;else{b="#"+a;location.hash=b}jQuery.historyCurrentHash=b;if(jQuery.historyNeedIframe){var c=jQuery("#jQuery_history")[0].contentWindow.document;c.open();c.close();c.location.hash=b;jQuery.lastHistoryLength=
history.length;jQuery.historyCallback(a)}else if(jQuery.browser.safari){jQuery.dontCheck=true;this.historyAddHistory(a);window.setTimeout(function(){jQuery.dontCheck=false},200);jQuery.historyCallback(a);location.hash=b}else jQuery.historyCallback(a)}});
